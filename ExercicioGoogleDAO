package br.ufpb.educservice.persistencia;

import java.util.LinkedList;
import java.util.List;


import br.ufpb.educservice.Exercicio;
import br.ufpb.educservice.ExercicioDAO;
import br.ufpb.educservice.Questao;
import br.ufpb.educservice.QuestaoDissertativa;
import br.ufpb.educservice.QuestaoMultiplaEscolha;
import br.ufpb.educservice.QuestaoVouF;
import br.ufpb.gdata.educservice.PlanilhasGoogle;


public class ExercicioGoogleDAO implements ExercicioDAO{
	
	private List<Exercicio> exercicios = new LinkedList<Exercicio>();
	private PlanilhasGoogle planilhaGoogle = new PlanilhasGoogle();
		
	
	/**
	 * Este Método cria um Exercício e chama o método criarPlanilha da classe 
	 * PlanilhasGoogle passando o ID do Exercicio como parâmetro
	 * 
	 */
	public Exercicio criarExercicio() {
		
		// Cria um id com a data e a hora em que foi criado o exercício
		
		String id = IDGenerator.getInstance().gerarID();
		Exercicio exercicio = new Exercicio(id);
		this.exercicios.add(exercicio);
		
		planilhaGoogle.criarPlanilha(id);
		return exercicio;
	}

	/**
	 * Este Método exclui um Exercício da lista de exercicios
	 * Passando o id por parâmetro
	 * @throws ExercicioInexistenteException 
	 */
	public void apagar(String idExercicio) {
		
		
	}

	@Override
	public void atualizar(Exercicio e) {
		// TODO Auto-generated method stub
		
	}

	/**
	 * Este método pesquisa um exercicio pelo ID, caso não seja encontrado lança uma exceção
	 */
	public Exercicio pesquisarExercicioPorId(String idExercicio) {
		return null;
		
		
	}

	@Override
	public QuestaoMultiplaEscolha cadastrarQuestaoME(String idExercicio, String enunciado, List<String> alternativas) {
		// obtém a primeira coluna para mais a frente acrescentar e adicionar cada alternativa
		int colunaAlternativas = planilhaGoogle.COLUNA_DA_QUESTAO;
		
		// Nesta variável irá armazenar a última linha preenchida da coluna de questões  
		int linhaParaAdicionar = planilhaGoogle.getUltimaLinhaPreenchidas(idExercicio, planilhaGoogle.COLUNA_DA_QUESTAO);
				
		// será acrescentado uma unidade a mais para que seja adicionado a nova questão na proxima linha, que está vazia
		// adiciona o enunciado da questão na primeira coluna na linha subsequente as demais preenchidas
		planilhaGoogle.addConteudoEmCelula(idExercicio, enunciado, ++linhaParaAdicionar, planilhaGoogle.COLUNA_DA_QUESTAO);
		
		// Adiciona cada alternativa na mesma linha que o enunciado, porém nas colunas posteriores
		for(String alternativa: alternativas){
			planilhaGoogle.addConteudoEmCelula(idExercicio, alternativa, linhaParaAdicionar, ++colunaAlternativas);
		}
			
		
		return null;
	}

	@Override
	public QuestaoVouF cadastrarQuestaoVouF(String idExercicio, List<String> afirmativas) {
		// obtém a primeira coluna para mais a frente acrescentar e adicionar cada alternativa
		int colunaAlternativas = planilhaGoogle.COLUNA_DA_QUESTAO;
		// variável pra preencher a linha da primeira coluna onde serão armazenadas as afirmativas
		String enunciado = "Questões V/F";
		
		// Nesta variável irá armazenar a última linha preenchida da coluna de questões  
		int linhaParaAdicionar = planilhaGoogle.getUltimaLinhaPreenchidas(idExercicio, planilhaGoogle.COLUNA_DA_QUESTAO);
			
		// será acrescentado uma unidade a mais para que seja adicionado a nova questão na proxima linha, que está vazia
		// adiciona o enunciado da questão na primeira coluna na linha subsequente as demais preenchidas
		planilhaGoogle.addConteudoEmCelula(idExercicio, enunciado, ++linhaParaAdicionar, planilhaGoogle.COLUNA_DA_QUESTAO);
				
		// Adiciona cada alternativa na mesma linha que o enunciado, porém nas colunas posteriores
		for(String afirmativa: afirmativas){
			planilhaGoogle.addConteudoEmCelula(idExercicio, afirmativa, linhaParaAdicionar, ++colunaAlternativas);
		}
		return null;
	}

	@Override
	public QuestaoDissertativa cadastrarQuestaoDissertativa(String idExercicio, String enunciado) {
		
		// Nesta variável irá armazenar a última linha preenchida da coluna de questões  
		int linhaParaAdicionar = planilhaGoogle.getUltimaLinhaPreenchidas(idExercicio, planilhaGoogle.COLUNA_DA_QUESTAO);
		
		// será acrescentado uma unidade a mais para que seja adicionado a nova questão na proxima linha, que está vazia
		// adiciona o enunciado da questão na primeira coluna na linha subsequente as demais preenchidas
		planilhaGoogle.addConteudoEmCelula(idExercicio, enunciado, ++linhaParaAdicionar, planilhaGoogle.COLUNA_DA_QUESTAO);
	
		return null;
	}

	@Override
	public Questao pesquisarQuestaoPorId(String idExercicio, String idQuestao) {
		// TODO Auto-generated method stub
		return null;
	}

	@Override
	public QuestaoMultiplaEscolha pesquisarQuestaoMEPorId(String idExercicio,
			String idQuestao) {
		// TODO Auto-generated method stub
		return null;
	}

	@Override
	public QuestaoVouF pesquisarQuestaoVouFPorId(String idExercicio,
			String idQuestao) {
		// TODO Auto-generated method stub
		return null;
	}

	@Override
	public QuestaoDissertativa pesquisarQuestaoDissertativaPorId(
			String idExercicio, String idQuestao) {
		// TODO Auto-generated method stub
		return null;
	}

	@Override
	public QuestaoMultiplaEscolha cadastrarRespostaQuestaoMEPorId(
			String idExercicio, int alternativaCorreta) {
		// TODO Auto-generated method stub
		return null;
	}

	@Override
	public QuestaoVouF cadastrarRespostaQuestaoVouFPorId(String idExercicio,
			List<String> respostas) {
		// TODO Auto-generated method stub
		return null;
	}

	@Override
	public QuestaoDissertativa cadastrarRespostaQuestaoDissertativaPorId(
			String idExercicio, String idQuestao, String solucao) {
		// TODO Auto-generated method stub
		return null;
	}
	
	
}
